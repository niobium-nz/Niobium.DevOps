parameters:
- name: inputJSONValue
  type: string
- name: outputVariableName
  type: string  

steps:
- pwsh: |
    $armOutputObj = '${{ parameters.inputJSONValue }}' | ConvertFrom-Json
    $armOutputObj.PSObject.Properties | ForEach-Object {
      $keyname = $_.Name
      $value = $_.Value.value
      Write-Output "##vso[task.setvariable variable=$keyName;isOutput=true]$value"
    }
  name: ${{ parameters.outputVariableName }}